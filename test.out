
> test
> node_modules/.bin/c8 node_modules/.bin/nyc  node_modules/.bin/mocha --timeout 10000 --cahe off



  /populate/{type}
    ✔ must show 400 - error
    ✔ must show 404 - not found
    /populate/rooms
      ✔ must show rooms (177ms)
    /populate/schedules
      ✔ must show schedules (107ms)
    /populate/teachers
      ✔ must show teachers (140ms)

  default route
    ✔ expected default route 

  room/{id}/{time}
    ✔ should show room class of C0-05 at 30/10/2023 at 8:30 am and it has no class (607ms)
    ✔ should show room class of C0-04 at 30/10/2023 at  15:20 and it has no class at this time (383ms)
    ✔ should show error because the date is not well formated
    ✔ should show not found because the id does not exist 
    ✔ should show empty because the date is negative 
    ✔ should show empty because the date is well formated but is recognized as 0230/03/30 
    ✔ should show 404 because of bad params

  /rooms/{computerRoomOnly}/{time}
2023-03-30T15:20:00.000Z
[]
[]
[]
[]
[
  Cours {
    id: undefined,
    start: 2023-03-30T15:00:00.000Z,
    end: 2023-03-30T16:20:00.000Z,
    summary: "TD - Développement d'apps avec IHM\\, INFO 1 Groupe 1\\, BOUTIN Olivier",
    location: 'J-C0/02',
    roomId: 0
  }
]
    ✔ should show all empty non-computer rooms on the given date (1566ms)
2023-03-30T15:20:00.000Z
[]
[]
[]
[
  Cours {
    id: undefined,
    start: 2023-03-30T15:00:00.000Z,
    end: 2023-03-30T16:20:00.000Z,
    summary: "TD - Développement d'apps avec IHM\\, INFO 1 Groupe 1\\, BOUTIN Olivier",
    location: 'J-C0/02',
    roomId: 0
  }
]
    ✔ should show all empty computer rooms on the given date (57ms)
2023-03-30T11:42:00.000Z
[
  Cours {
    id: undefined,
    start: 2023-03-30T11:00:00.000Z,
    end: 2023-03-30T12:20:00.000Z,
    summary: 'TD - Gestion projet orga. 2\\, INFO 1 Groupe 4\\, CORDEAU Florent',
    location: 'J-C0/01',
    roomId: 0
  }
]
[
  Cours {
    id: undefined,
    start: 2023-03-30T10:10:00.000Z,
    end: 2023-03-30T12:20:00.000Z,
    summary: "TD - Développement d'une application complexe (parc. REAL)\\, INFO 2 Groupe 4",
    location: 'J-C0/03',
    roomId: 0
  }
]
[
  Cours {
    id: undefined,
    start: 2023-03-30T11:00:00.000Z,
    end: 2023-03-30T12:20:00.000Z,
    summary: 'TP - Stats descriptives\\, INFO 1 TP 3-1\\, SIMONNEAU François',
    location: 'J-C0/04',
    roomId: 0
  }
]
[
  Cours {
    id: undefined,
    start: 2023-03-30T11:00:00.000Z,
    end: 2023-03-30T12:20:00.000Z,
    summary: 'TD - Gestion projet orga. 2\\, INFO 1 Groupe 1\\, MOTTU Jean-Marie',
    location: 'J-C0/02',
    roomId: 0
  }
]
    ✔ should show empty because there are no empty rooms (58ms)
    ✔ should show error because the date is not well formated
    ✔ should show 404 because of bad params

  /schedule
    /schedule/day/{id}/{date}
      ✔ should show 404 because the room does not exist (103ms)
      ✔ should show error ? and the schedule of the room 
      1) should show the schedule of the room on the given day
    /schedule/week/{id}/{date}
      2) should show 404 because the room does not exist
      3) should show empty tab and the schedule of the room 
      4) should show error ? and the schedule of the room 
      ✔ should show the schedule of the room C0/03 for the week
      ✔ should show the not found because the params are not correct
      5) should show the schedule of the week for the room C0/03

  Models
    room
      6) constructs
      7) gets the url


  22 passing (3s)
  7 failing

  1) /schedule
       /schedule/day/{id}/{date}
         should show the schedule of the room on the given day:

      AssertionError: expected [ Cours{ id: undefined, …(5) }, …(1) ] to deeply equal [ { start: Invalid Date, …(4) }, …(1) ]
      + expected - actual

       [
         {
      -    "end": [Date: 2023-03-30T10:00:00.000Z]
      -    "id": [undefined]
      +    "end": [Date: Invalid Date]
           "location": "J-C0/03"
           "roomId": 0
      -    "start": [Date: 2023-03-30T08:00:00.000Z]
      +    "start": [Date: Invalid Date]
           "summary": "TD - Développement d'une application complexe (parc. REAL)\\, INFO 2 Groupe 3"
         }
         {
      -    "end": [Date: 2023-03-30T12:20:00.000Z]
      -    "id": [undefined]
      +    "end": [Date: Invalid Date]
           "location": "J-C0/03"
           "roomId": 0
      -    "start": [Date: 2023-03-30T10:10:00.000Z]
      +    "start": [Date: Invalid Date]
           "summary": "TD - Développement d'une application complexe (parc. REAL)\\, INFO 2 Groupe 4"
         }
       ]
      
      at Context.<anonymous> (file:///var/www/html/SAE4/API/test/test-chai.mjs:407:43)
      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)

  2) /schedule
       /schedule/week/{id}/{date}
         should show 404 because the room does not exist:

      AssertionError: expected [ [], [], [], [], [], [], [] ] to deeply equal []
      + expected - actual

      -[
      -  []
      -  []
      -  []
      -  []
      -  []
      -  []
      -  []
      -]
      +[]
      
      at Context.<anonymous> (file:///var/www/html/SAE4/API/test/test-chai.mjs:445:43)
      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)

  3) /schedule
       /schedule/week/{id}/{date}
         should show empty tab and the schedule of the room :

      AssertionError: expected 400 to equal 200
      + expected - actual

      -400
      +200
      
      at Context.<anonymous> (file:///var/www/html/SAE4/API/test/test-chai.mjs:453:44)
      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)

  4) /schedule
       /schedule/week/{id}/{date}
         should show error ? and the schedule of the room :

      AssertionError: expected { message: 'date invalide' } to deeply equal { message: 'error' }
      + expected - actual

       {
      -  "message": "date invalide"
      +  "message": "error"
       }
      
      at Context.<anonymous> (file:///var/www/html/SAE4/API/test/test-chai.mjs:463:43)
      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)

  5) /schedule
       /schedule/week/{id}/{date}
         should show the schedule of the week for the room C0/03:

      AssertionError: expected [ [], [ …(5) ], …(5) ] to deeply equal [ [], …(6) ]
      + expected - actual

       [
         []
         [
           {
      -      "end": [Date: 2023-03-27T10:50:00.000Z]
      -      "id": [undefined]
      +      "end": [Date: Invalid Date]
             "location": "J-C0/03"
             "roomId": 0
      -      "start": [Date: 2023-03-27T09:30:00.000Z]
      +      "start": [Date: Invalid Date]
             "summary": "TP - Exploitation BD_R2\\, INFO 1 TP 1-2\\, NACHOUKI Gilles"
           }
           {
      -      "end": [Date: 2023-03-27T12:20:00.000Z]
      -      "id": [undefined]
      +      "end": [Date: Invalid Date]
             "location": "J-C0/03"
             "roomId": 0
      -      "start": [Date: 2023-03-27T11:00:00.000Z]
      +      "start": [Date: Invalid Date]
             "summary": "TP - Exploitation BD_R2\\, INFO 1 TP 1-2\\, NACHOUKI Gilles"
           }
           {
      -      "end": [Date: 2023-03-27T14:50:00.000Z]
      -      "id": [undefined]
      +      "end": [Date: Invalid Date]
             "location": "J-C0/03"
             "roomId": 0
      -      "start": [Date: 2023-03-27T13:30:00.000Z]
      +      "start": [Date: Invalid Date]
             "summary": "TD - Services réseau\\, INFO 1 Groupe 2\\, HERNANDEZ Nicolas"
           }
           {
      -      "end": [Date: 2023-03-27T16:20:00.000Z]
      -      "id": [undefined]
      +      "end": [Date: Invalid Date]
             "location": "J-C0/03"
             "roomId": 0
      -      "start": [Date: 2023-03-27T15:00:00.000Z]
      +      "start": [Date: Invalid Date]
             "summary": "TP - Services réseau\\, INFO 1 TP 2-1\\, HERNANDEZ Nicolas"
           }
           {
      -      "end": [Date: 2023-03-27T17:50:00.000Z]
      -      "id": [undefined]
      +      "end": [Date: Invalid Date]
             "location": "J-C0/03"
             "roomId": 0
      -      "start": [Date: 2023-03-27T16:30:00.000Z]
      +      "start": [Date: Invalid Date]
             "summary": "TP - Services réseau\\, INFO 1 TP 2-2\\, HERNANDEZ Nicolas"
           }
         ]
         [
           {
      -      "end": [Date: 2023-03-28T09:20:00.000Z]
      -      "id": [undefined]
      +      "end": [Date: Invalid Date]
             "location": "J-C0/03"
             "roomId": 0
      -      "start": [Date: 2023-03-28T08:00:00.000Z]
      +      "start": [Date: Invalid Date]
             "summary": "TD - Communication professionnelle\\, INFO 1 Groupe 1\\, CAZALAS Sebastien"
           }
           {
      -      "end": [Date: 2023-03-28T10:50:00.000Z]
      -      "id": [undefined]
      +      "end": [Date: Invalid Date]
             "location": "J-C0/03"
             "roomId": 0
      -      "start": [Date: 2023-03-28T09:30:00.000Z]
      +      "start": [Date: Invalid Date]
             "summary": "TD - Services réseau\\, INFO 1 Groupe 1\\, REMM Jean-François"
           }
           {
      -      "end": [Date: 2023-03-28T12:20:00.000Z]
      -      "id": [undefined]
      +      "end": [Date: Invalid Date]
             "location": "J-C0/03"
             "roomId": 0
      -      "start": [Date: 2023-03-28T11:00:00.000Z]
      +      "start": [Date: Invalid Date]
             "summary": "TP - Services réseau\\, INFO 1 TP 1-2\\, REMM Jean-François"
           }
           {
      -      "end": [Date: 2023-03-28T16:20:00.000Z]
      -      "id": [undefined]
      +      "end": [Date: Invalid Date]
             "location": "J-C0/03"
             "roomId": 0
      -      "start": [Date: 2023-03-28T15:00:00.000Z]
      +      "start": [Date: Invalid Date]
             "summary": "TP - Services réseau\\, INFO 1 TP 1-1\\, REMM Jean-François"
           }
         ]
         [
           {
      -      "end": [Date: 2023-03-29T14:50:00.000Z]
      -      "id": [undefined]
      +      "end": [Date: Invalid Date]
             "location": "J-C0/03"
             "roomId": 0
      -      "start": [Date: 2023-03-29T13:30:00.000Z]
      +      "start": [Date: Invalid Date]
             "summary": "TD - Services réseau\\, INFO 1 Groupe 3\\, BOUTIN Olivier"
           }
           {
      -      "end": [Date: 2023-03-29T16:20:00.000Z]
      -      "id": [undefined]
      +      "end": [Date: Invalid Date]
             "location": "J-C0/03"
             "roomId": 0
      -      "start": [Date: 2023-03-29T15:00:00.000Z]
      +      "start": [Date: Invalid Date]
             "summary": "TP - Services réseau\\, INFO 1 TP 3-1\\, BOUTIN Olivier"
           }
           {
      -      "end": [Date: 2023-03-29T17:50:00.000Z]
      -      "id": [undefined]
      +      "end": [Date: Invalid Date]
             "location": "J-C0/03"
             "roomId": 0
      -      "start": [Date: 2023-03-29T16:30:00.000Z]
      +      "start": [Date: Invalid Date]
             "summary": "TP - Services réseau\\, INFO 1 TP 3-1\\, BOUTIN Olivier"
           }
         ]
         [
           {
      -      "end": [Date: 2023-03-30T10:00:00.000Z]
      -      "id": [undefined]
      +      "end": [Date: Invalid Date]
             "location": "J-C0/03"
             "roomId": 0
      -      "start": [Date: 2023-03-30T08:00:00.000Z]
      +      "start": [Date: Invalid Date]
             "summary": "TD - Développement d'une application complexe (parc. REAL)\\, INFO 2 Groupe 3"
           }
           {
      -      "end": [Date: 2023-03-30T12:20:00.000Z]
      -      "id": [undefined]
      +      "end": [Date: Invalid Date]
             "location": "J-C0/03"
             "roomId": 0
      -      "start": [Date: 2023-03-30T10:10:00.000Z]
      +      "start": [Date: Invalid Date]
             "summary": "TD - Développement d'une application complexe (parc. REAL)\\, INFO 2 Groupe 4"
           }
         ]
         [
           {
      -      "end": [Date: 2023-03-31T10:50:00.000Z]
      -      "id": [undefined]
      +      "end": [Date: Invalid Date]
             "location": "J-C0/03"
             "roomId": 0
      -      "start": [Date: 2023-03-31T09:30:00.000Z]
      +      "start": [Date: Invalid Date]
             "summary": "TD - Développement d'une application complexe (parc. REAL)\\, INFO 2 Groupe 4"
           }
           {
      -      "end": [Date: 2023-03-31T12:20:00.000Z]
      -      "id": [undefined]
      +      "end": [Date: Invalid Date]
             "location": "J-C0/03"
             "roomId": 0
      -      "start": [Date: 2023-03-31T11:00:00.000Z]
      +      "start": [Date: Invalid Date]
             "summary": "TD - Développement d'une application complexe (parc. REAL)\\, INFO 2 Groupe 4"
           }
         ]
         []
      
      at Context.<anonymous> (file:///var/www/html/SAE4/API/test/test-chai.mjs:492:43)
      at process.processTicksAndRejections (node:internal/process/task_queues:95:5)

  6) Models
       room
         constructs:
     TypeError: Class constructor Room cannot be invoked without 'new'
      at Context.<anonymous> (file:///var/www/html/SAE4/API/test/test-fonctionnel.mjs:16:24)
      at process.processImmediate (node:internal/timers:476:21)

  7) Models
       room
         gets the url:
     TypeError: Class constructor Room cannot be invoked without 'new'
      at Context.<anonymous> (file:///var/www/html/SAE4/API/test/test-fonctionnel.mjs:27:26)
      at process.processImmediate (node:internal/timers:476:21)



----------|---------|----------|---------|---------|-------------------
File      | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
----------|---------|----------|---------|---------|-------------------
All files |       0 |        0 |       0 |       0 |                   
----------|---------|----------|---------|---------|-------------------
-------------------|---------|----------|---------|---------|---------------------------------------
File               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                     
-------------------|---------|----------|---------|---------|---------------------------------------
All files          |   70.38 |    75.86 |   56.97 |   70.38 |                                       
 API               |   76.16 |    71.79 |   41.66 |   76.16 |                                       
  cours.mjs        |   64.44 |      100 |      25 |   64.44 | 11-12,25-26,36-47,52-56,59-64,67-71   
  server.mjs       |   77.94 |    69.44 |      50 |   77.94 | ...87,505-520,543-551,578-588,592-593 
 API/controller    |   53.17 |    75.67 |      40 |   53.17 |                                       
  controller.mjs   |   53.17 |    75.67 |      40 |   53.17 | ...39,243-271,275-299,303-323,327-344 
 API/dao           |   68.49 |    68.85 |   60.71 |   68.49 |                                       
  roomDao.mjs      |   77.41 |     64.7 |   83.33 |   77.41 | ...8-29,33-41,50-51,72-73,82-83,90-91 
  scheduleDao.mjs  |   76.95 |    69.69 |   81.81 |   76.95 | ...79,188-189,196-197,217-218,227-228 
  teacherDao.mjs   |   86.71 |       70 |      60 |   86.71 | 20-21,25-31,49,61-63,77-82            
  userDao.mjs      |   22.88 |      100 |       0 |   22.88 | 11-23,27-43,47-63,68-85,89-93,97-117  
 API/model         |   89.93 |    91.89 |   84.21 |   89.93 |                                       
  cours.mjs        |     100 |      100 |     100 |     100 |                                       
  room.mjs         |    91.3 |      100 |   66.66 |    91.3 | 12-13                                 
  schedule.mjs     |     100 |      100 |     100 |     100 |                                       
  scheduleType.mjs |   93.75 |       80 |     100 |   93.75 | 13,23                                 
  schedules.mjs    |     100 |      100 |     100 |     100 |                                       
  teacher.mjs      |   85.71 |      100 |   66.66 |   85.71 | 10-11                                 
  user.mjs         |   16.66 |       50 |       0 |   16.66 | 1-10                                  
-------------------|---------|----------|---------|---------|---------------------------------------
